controllers:
  main:
    containers:
      main:
        image:
          repository: ghcr.io/wg-easy/wg-easy
          tag: 15.1.0
        env:
          INSECURE: true
          DISABLE_IPV6: true
        securityContext:
          capabilities:
            add:
              - NET_ADMIN
      dns-tcp:
        image:
          repository: docker.io/alpine/socat
          tag: 1.8.0.3
        args:
          - tcp-listen:53,fork,reuseaddr
          - tcp:adguard-dns.networking:53
      dns-udp:
        image:
          repository: docker.io/alpine/socat
          tag: 1.8.0.3
        args:
          - -T30
          - udp-listen:53,fork,reuseaddr
          - udp:adguard-dns.networking:53
service:
  main:
    forceRename: wireguard
    controller: main
    primary: true
    ports:
      http:
        port: 51821
  wg:
    controller: main
    type: LoadBalancer
    annotations:
      lbipam.cilium.io/ips: 192.168.123.32
    ports:
      wg:
        port: 51820
        protocol: UDP
        targetPort: 51820
ingress:
  main:
    className: traefik
    hosts:
      - host: wireguard.chamburr.xyz
        paths:
          - path: /
            pathType: Prefix
            service:
              identifier: main
              port: http
persistence:
  data:
    existingClaim: wireguard
    globalMounts:
      - path: /etc/wireguard
