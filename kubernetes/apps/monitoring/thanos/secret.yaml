---
apiVersion: ricoberger.de/v1alpha1
kind: VaultSecret
metadata:
  name: thanos-secret
  namespace: monitoring
spec:
  keys:
    - username
    - password
  templates:
    username: "{% .Secrets.username %}"
    password: "{% .Secrets.password %}"
    config: |-
      basic_auth_users:
        {% .Secrets.username %}: {% (trimPrefix ":" (htpasswd "" .Secrets.password) %}
  path: secret/monitoring/thanos
  type: Opaque
